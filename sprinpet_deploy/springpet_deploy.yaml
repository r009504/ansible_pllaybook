---
  - name: Springpetclinic deployment
    hosts: appserver
    become: yes
    tasks:
      - name: Chekcing the O.S distrubution is ubuntu
        fail:
          msg: "Deployment will be skipped as O.S is not ubuntu "
        when:  ansible_facts['distribution'] != "Ubuntu"
      - name: instaling  java package
        apt:
          name: "{{ java_package }}"
          update_cache: yes
        notify:
          - instaling  java package
      - name: Creating applicaiton directory
        file:
          path: "{{ apps_directory }}"
          state: directory
        notify:
          - Creating applicaiton directory
      - name: Download Springpetclinic.jar file
        get_url:
          url: "{{ download_url }}"
          dest: "{{ dest_apps_locaiton }}"

    handlers:
      - name: instaling  java package
        debug:
          msg: " Java package {{ java_package }} installed"

      - name: Creating applicaiton directory
        debug:
          msg: "Direcotry is created at {{ apps_directory }} "
      